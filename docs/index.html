<!doctype html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zlatni zmaj - Evidencija</title>
  <link rel="stylesheet" href="style.css" />
  <script>
    // Set this to your Google OAuth client ID (also used on the backend as GOOGLE_OAUTH_CLIENT_ID).
    window.GOOGLE_CLIENT_ID = window.GOOGLE_CLIENT_ID || '';
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <header class="hero">
    <div class="hero-bg"></div>
    <div class="hero-inner">
      <div class="brand">
        <div class="logo-badge" aria-hidden="true">
          <img src="zmaj.jpg" alt="Zlatni Zmaj logo" loading="lazy" />
        </div>
        <div>
          <p class="eyebrow">Evidencija volontera</p>
          <h1>ZLATNI ZMAJ</h1>
          <p class="lede">Pregled baze, evidencije i unošenje termina.</p>
        </div>
      </div>
      <div class="hero-stats">
        <div class="stat">
          <span class="stat-label" id="stat-total-label">Na listi</span>
          <strong id="stat-total">-</strong>
        </div>
        <div class="stat">
          <span class="stat-label" id="stat-selected-label">OZNAČENO</span>
          <strong id="stat-selected">0</strong>
        </div>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="tabs">
      <div class="tab-list" role="tablist" aria-label="Navigacija kartica">
        <button
          class="tab-btn active"
          id="tab-baza-btn"
          data-tab-target="tab-baza"
          role="tab"
          aria-controls="tab-baza"
          aria-selected="true"
        >
          BAZA VOLONTERA
        </button>
        <button
          class="tab-btn"
          id="tab-termini-btn"
          data-tab-target="tab-termini"
          role="tab"
          aria-controls="tab-termini"
          aria-selected="false"
        >
          TERMINI
        </button>
        <button
          class="tab-btn"
          id="tab-unos-btn"
          data-tab-target="tab-unos"
          role="tab"
          aria-controls="tab-unos"
          aria-selected="false"
        >
          UNOS U EVIDENCIJU
        </button>
      </div>

      <section
        id="tab-baza"
        class="tab-panel active"
        role="tabpanel"
        aria-labelledby="tab-baza-btn"
      >
        <div class="layout">
          <section class="panel panel-wide stretch-panel">
            <div class="panel-header">
              <div>
                <h2>Baza volontera</h2>
                <p class="muted">Tablica svih volontera.</p>
              </div>
              <div class="panel-chips">
                <span class="pill pill-muted uppercase">Samo za čitanje</span>
              </div>
            </div>
            <div class="filters filters-column">
              <div class="filter-row">
                <div class="filter-group">
                  <label class="filter-label" for="baza-grade-filter">Razred</label>
                  <select id="baza-grade-filter" class="filter-select">
                    <option value="">Svi razredi</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label class="filter-label" for="baza-school-filter">Škola</label>
                  <select id="baza-school-filter" class="filter-select">
                    <option value="">Sve škole</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label class="filter-label" for="baza-location-filter">Lokacija</label>
                  <select id="baza-location-filter" class="filter-select">
                    <option value="">Sve lokacije</option>
                  </select>
                </div>
              </div>
              <div class="search-group">
                <input type="search" id="baza-search" placeholder="Traži volontera..." />
                <button type="button" id="baza-clear-search" class="ghost-btn ghost-btn-small">Očisti</button>
              </div>
            </div>
            <div class="table-wrapper tall-table">
              <table class="roster-table compact" id="baza-table">
                <thead>
                  <tr>
                    <th class="sortable col-name" data-baza-sort="name">IME I PREZIME</th>
                    <th class="sortable col-school" data-baza-sort="school">ŠKOLA</th>
                    <th class="sortable center col-grade" data-baza-sort="grade">RAZRED</th>
                    <th class="sortable col-locations" data-baza-sort="locations">LOKACIJE</th>
                    <th class="sortable col-phone" data-baza-sort="phone">KONTAKT</th>
                    <th class="sortable center col-hours" data-baza-sort="hours">SATI</th>
                  </tr>
                </thead>
                <tbody id="baza-table-body">
                  <tr class="empty-row">
                    <td colspan="6">Lista se učitava...</td>
                  </tr>
                </tbody>
              </table>
              <div id="baza-cards" class="volunteer-cards baza-cards">
                <!-- mobile cards for baza -->
              </div>
            </div>
          </section>
        </div>
      </section>

      <section
        id="tab-termini"
        class="tab-panel"
        role="tabpanel"
        aria-labelledby="tab-termini-btn"
      >
        <div class="layout">
          <section class="panel panel-wide stretch-panel">
            <div class="panel-header">
              <div>
                <h2>Evidencija termina</h2>
                <p class="muted">Pregled svih upisanih termina.</p>
              </div>
              <div class="panel-chips">
                <span class="pill pill-muted uppercase">SAMO ZA ČITANJE</span>
              </div>
            </div>
            <div class="filters filters-column">
              <div class="filter-row">
                <div class="filter-group">
                  <label class="filter-label" for="events-location-filter">Lokacija</label>
                  <select id="events-location-filter" class="filter-select">
                    <option value="">Sve lokacije</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label class="filter-label" for="events-year-filter">Godina</label>
                  <select id="events-year-filter" class="filter-select">
                    <option value="">Sve godine</option>
                  </select>
                </div>
              </div>
              <div class="search-group">
                <input type="search" id="events-search" placeholder="Traži po lokaciji, datumu ili volonterima..." />
                <button type="button" id="events-clear-search" class="ghost-btn ghost-btn-small">Očisti</button>
              </div>
            </div>
            <div class="table-wrapper tall-table">
              <table class="roster-table compact" id="events-table">
                <thead>
                  <tr>
                    <th class="sortable col-date" data-events-sort="date">DATUM</th>
                    <th class="sortable col-location center" data-events-sort="location">LOKACIJA</th>
                    <th class="sortable center col-number" data-events-sort="childrenCount">BROJ DJECE</th>
                    <th class="sortable center col-number" data-events-sort="volunteerCount">BROJ VOLONTERA</th>
                    <th class="sortable col-volunteers" data-events-sort="volunteers">VOLONTERI</th>
                  </tr>
                </thead>
                <tbody id="events-table-body">
                  <tr class="empty-row">
                    <td colspan="5">Evidencija se učitava...</td>
                  </tr>
                </tbody>
              </table>
              <div id="events-cards" class="volunteer-cards events-cards">
                <!-- mobile event cards -->
              </div>
            </div>
          </section>
        </div>
      </section>

      <section
        id="tab-unos"
        class="tab-panel"
        role="tabpanel"
        aria-labelledby="tab-unos-btn"
      >
        <form id="attendance-form" class="layout">
          <section class="panel panel-auth" id="auth-panel">
            <div class="panel-header auth-header">
              <div>
                <h2>Prijava za unos</h2>
                <p class="muted">Google prijava je potrebna za spremanje evidencije.</p>
              </div>
              <div class="auth-actions">
                <div id="google-signin-btn" class="google-btn-slot" aria-live="polite"></div>
                <button type="button" id="manual-login-btn" class="ghost-btn ghost-btn-small">
                  Prijavi se Google računom
                </button>
                <button type="button" id="google-signout-btn" class="ghost-btn ghost-btn-small" hidden>
                  Odjava
                </button>
              </div>
            </div>
            <div class="auth-body">
              <div class="auth-user" id="auth-user" hidden>
                <div class="auth-avatar" id="auth-avatar" aria-hidden="true"></div>
                <div>
                  <div class="auth-name" id="auth-user-name"></div>
                  <div class="auth-email" id="auth-user-email"></div>
                </div>
              </div>
              <div class="auth-hint">
                <span class="pill pill-info" id="auth-badge">PRIJAVA POTREBNA</span>
                <p id="auth-message">Prijavi se Google računom kako bi otključao unos.</p>
              </div>
            </div>
          </section>
          <section class="panel">
            <div class="panel-header">
              <div>
                <h2>Održani termin</h2>
              </div>
              <div class="panel-chips">
                <span class="pill pill-info uppercase" id="status-chip">SPREMNO</span>
              </div>
            </div>
            <div class="panel-body">
              <div class="field">
                <label for="date">Datum</label>
                <input
                  type="text"
                  id="date"
                  name="date"
                  inputmode="numeric"
                  placeholder="d.m.gggg."
                  required
                />
                <input type="date" id="date-picker" aria-hidden="true" class="visually-hidden" />
              </div>

              <div class="field">
                <label for="location">Lokacija</label>
                <select id="location" name="location" required>
                  <option value="" disabled selected>Odaberi lokaciju</option>
                </select>
              </div>

              <div class="field-inline spaced-row">
                <div class="field">
                  <label for="childrenCount">Broj djece</label>
                  <input
                    type="number"
                    id="childrenCount"
                    name="childrenCount"
                    min="0"
                    required
                  />
                </div>

                <div class="field">
                  <label for="volunteerCount">Broj volontera</label>
                  <input
                    type="number"
                    id="volunteerCount"
                    name="volunteerCount"
                    min="0"
                    required
                  />
                </div>
              </div>
            </div>
            <div class="panel-footer">
              <p class="hint">Prvo upiši podatke o terminu, zatim označi volontere.</p>
            </div>
          </section>

          <section class="panel panel-wide">
            <div class="panel-header">
              <div>
                <h2>Popis volontera</h2>
                <p class="muted">Pretraži, sortiraj i označi volontere koji su došli.</p>
              </div>
              <div class="actions aligned-actions">
                <button type="button" id="sort-toggle" class="ghost-btn">A-Z</button>
                <button type="button" id="select-all-btn" class="ghost-btn">Označi sve vidljive</button>
                <button type="button" id="deselect-all-btn" class="ghost-btn">Poništi odabrano</button>
              </div>
            </div>

            <div class="filters">
              <div class="search-group">
                <input type="search" id="search-input" placeholder="Traži volontera..." />
                <button type="button" id="clear-search" class="ghost-btn ghost-btn-small">Očisti</button>
              </div>
              <div class="legend">
                <span class="pill pill-muted">Klik na red označava prisutnost</span>
              </div>
            </div>

            <div class="table-wrapper">
              <table class="roster-table">
                <thead>
                  <tr>
                    <th class="sortable col-name" data-sort-key="name">IME I PREZIME</th>
                    <th class="sortable col-school" data-sort-key="school">ŠKOLA</th>
                    <th class="sortable col-grade center" data-sort-key="grade">RAZRED</th>
                    <th class="sortable col-locations" data-sort-key="locations">LOKACIJE</th>
                    <th class="sortable col-hours center" data-sort-key="hours">SATI</th>
                    <th class="center col-present"></th>
                  </tr>
                </thead>
                <tbody id="volunteer-table-body">
                  <tr class="empty-row">
                    <td colspan="6">Lista se učitava...</td>
                  </tr>
                </tbody>
              </table>
              <div id="volunteer-cards" class="volunteer-cards">
                <!-- mobile cards rendered via app.js -->
              </div>
            </div>
          </section>

          <section class="panel panel-actions">
            <div class="actions">
              <button type="submit" class="primary-btn" data-auth-required="true" disabled>
                Spremi evidenciju
              </button>
              <button type="reset" class="ghost-btn" id="reset-btn">
                Očisti unos
              </button>
            </div>
            <p class="auth-warning" id="auth-warning">Prijava je potrebna za spremanje.</p>
            <p id="status" class="status"></p>
          </section>
        </form>
      </section>
    </div>
  </main>

  <footer class="footer">
    <small>AC Zlatni zmaj - Evidencija volontera</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
